# Проект "Виджет банковских операций клиента"

## Описание:

Это виджет, который показывает несколько последних успешных банковских операций клиента.

## Установка:

Клонируйте репозиторий:

```
git clone git@github.com:AlexandrKulikov1803/Homework.git
```

## Использование:

### Модуль masks.py

Функция ***get_mask_card_number*** маскирует номер банковской карты:

```
print(get_mask_card_number('7000792289606361')) # вызов функции
7000 79** **** 6361 # выход функции
```

+ Тестирование правильности маскирования номера карты.
+ Проверка работы функции на различных входных форматах номеров карт, включая граничные случаи и нестандартные длины
  номеров.
+ Проверка, что функция корректно обрабатывает входные строки, где отсутствует номер карты.

Функция ***get_mask_account*** маскирует номер банковского счёта:

```
print(get_mask_account('73654108430135874305')) # вызов функции
**4305 # выход функции
```

+ Тестирование правильности маскирования номера счета.
+ Проверка работы функции с различными форматами и длинами номеров счетов.
+ Проверка, что функция корректно обрабатывает входные строки, где номер счета меньше ожидаемой длины.

### Модуль widget.py

Функция ***mask_account_card*** используя алгоритмы предыдущих двух функций для маскировки номера карты/счёта:

```
# Пример для счёта
print(mask_account_card('Счет 73654108430135874305')) # вызов функции
Счет **4305 # выход функции

# Пример для карты
print(mask_account_card('Visa Platinum 7000792289606361')) # вызов функции
Visa Platinum 7000 79** **** 6361 # выход функции
```

+ Тесты для проверки, что функция корректно распознает и применяет нужный тип маскировки в зависимости от типа входных
  данных (карта или счет).
+ Параметризованные тесты с разными типами карт и счетов для проверки универсальности функции.
+ Тестирование функции на обработку некорректных входных данных и проверка ее устойчивости к ошибкам.

Функция ***get_date*** возвращает строку с датой в формате ДД.ММ.ГГГГ:

```
print(get_date("2024-03-11T02:26:18.671407")) # вызов функции
11.03.2024 # выход функции
```

+ Тестирование правильности преобразования даты.
+ Проверка работы функции на различных входных форматах даты, включая граничные случаи и нестандартные строки с датами.
+ Проверка, что функция корректно обрабатывает входные строки, где отсутствует дата.

### Модуль processing.py

Функция ***filter_by_state*** принимает список словарей и фильтрует его по ключу state:

```
# входные данные
list_of_states = [
    {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
    {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
    {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
    {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}
]

# вызов функции с параметром state (по умолчанию state = 'EXECUTED')
print(filter_by_state(list_of_states, 'EXECUTED'))

# на выходе получаем
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, 
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}
]
```

+ Тестирование фильтрации списка словарей по заданному статусу ***state***.
+ Проверка работы функции при отсутствии словарей с указанным статусом ***state*** в списке.
+ Параметризация тестов для различных возможных значений статуса ***state***.

Функция ***sort_by_date*** принимает список словарей и сортирует его по дате:

```
# входные данные
list_of_states = [
    {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
    {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
    {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
    {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}
]

# вызов функции c параметром order (по умолчанию order = True)
print(sort_by_date(list_of_states, True))

# на выходе получаем
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, 
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, 
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, 
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}
]
```

+ Тестирование сортировки списка словарей по датам в порядке убывания и возрастания.
+ Проверка корректности сортировки при одинаковых датах.

### Модуль generators.py

Функция ***filter_by_currency*** принимает на вход список словарей, представляющих транзакции
и возвращать итератор, который поочередно выдает транзакции, где валюта операции соответствует
заданной (например, USD):

```
# входные данные
transactions = (
    [
        {
            "id": 939719570,
            "state": "EXECUTED",
            "date": "2018-06-30T02:08:58.425572",
            "operationAmount": {
                "amount": "9824.07",
                "currency": {
                    "name": "USD",
                    "code": "USD"
                }
            },
            "description": "Перевод организации",
            "from": "Счет 75106830613657916952",
            "to": "Счет 11776614605963066702"
        },
        {
            "id": 142264268,
            "state": "EXECUTED",
            "date": "2019-04-04T23:20:05.206878",
            "operationAmount": {
                "amount": "79114.93",
                "currency": {
                    "name": "USD",
                    "code": "USD"
                }
            },
            "description": "Перевод со счета на счет",
            "from": "Счет 19708645243227258542",
            "to": "Счет 75651667383060284188"
        },
        {
            "id": 873106923,
            "state": "EXECUTED",
            "date": "2019-03-23T01:09:46.296404",
            "operationAmount": {
                "amount": "43318.34",
                "currency": {
                    "name": "руб.",
                    "code": "RUB"
                }
            },
            "description": "Перевод со счета на счет",
            "from": "Счет 44812258784861134719",
            "to": "Счет 74489636417521191160"
        },
        {
            "id": 895315941,
            "state": "EXECUTED",
            "date": "2018-08-19T04:27:37.904916",
            "operationAmount": {
                "amount": "56883.54",
                "currency": {
                    "name": "USD",
                    "code": "USD"
                }
            },
            "description": "Перевод с карты на карту",
            "from": "Visa Classic 6831982476737658",
            "to": "Visa Platinum 8990922113665229"
        },
        {
            "id": 594226727,
            "state": "CANCELED",
            "date": "2018-09-12T21:27:25.241689",
            "operationAmount": {
                "amount": "67314.70",
                "currency": {
                    "name": "руб.",
                    "code": "RUB"
                }
            },
            "description": "Перевод организации",
            "from": "Visa Platinum 1246377376343588",
            "to": "Счет 14211924144426031657"
        }
    ]
)

# вызов функции с параметром currency = "USD"
usd_transactions = filter_by_currency(transactions, "USD")
for i in range(2):
    print(next(usd_transactions))

# на выходе получаем
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572', 
'operationAmount': {'amount': '9824.07', 'currency': {'name': 'USD', 'code': 'USD'}}, 
'description': 'Перевод организации', 'from': 'Счет 75106830613657916952', 
'to': 'Счет 11776614605963066702'}
{'id': 142264268, 'state': 'EXECUTED', 'date': '2019-04-04T23:20:05.206878', 
'operationAmount': {'amount': '79114.93', 'currency': {'name': 'USD', 'code': 'USD'}}, 
'description': 'Перевод со счета на счет', 'from': 'Счет 19708645243227258542', 'to': 
'Счет 75651667383060284188'}
```

+ Тестирование фильтрации списка словарей по заданной валюте ***currency***.
+ Проверка работы функции при отсутствии словарей с указанным статусом ***currency*** в списке.
+ Параметризация тестов для различных возможных значений статуса ***currency***.

Функция ***transaction_descriptions*** принимает список словарей с транзакциями и 
возвращает описание каждой операции по очереди:

```
# входные данные
transactions = (
    [
        {
            "id": 939719570,
            "state": "EXECUTED",
            "date": "2018-06-30T02:08:58.425572",
            "operationAmount": {
                "amount": "9824.07",
                "currency": {
                    "name": "USD",
                    "code": "USD"
                }
            },
            "description": "Перевод организации",
            "from": "Счет 75106830613657916952",
            "to": "Счет 11776614605963066702"
        },
        {
            "id": 142264268,
            "state": "EXECUTED",
            "date": "2019-04-04T23:20:05.206878",
            "operationAmount": {
                "amount": "79114.93",
                "currency": {
                    "name": "USD",
                    "code": "USD"
                }
            },
            "description": "Перевод со счета на счет",
            "from": "Счет 19708645243227258542",
            "to": "Счет 75651667383060284188"
        },
        {
            "id": 873106923,
            "state": "EXECUTED",
            "date": "2019-03-23T01:09:46.296404",
            "operationAmount": {
                "amount": "43318.34",
                "currency": {
                    "name": "руб.",
                    "code": "RUB"
                }
            },
            "description": "Перевод со счета на счет",
            "from": "Счет 44812258784861134719",
            "to": "Счет 74489636417521191160"
        },
        {
            "id": 895315941,
            "state": "EXECUTED",
            "date": "2018-08-19T04:27:37.904916",
            "operationAmount": {
                "amount": "56883.54",
                "currency": {
                    "name": "USD",
                    "code": "USD"
                }
            },
            "description": "Перевод с карты на карту",
            "from": "Visa Classic 6831982476737658",
            "to": "Visa Platinum 8990922113665229"
        },
        {
            "id": 594226727,
            "state": "CANCELED",
            "date": "2018-09-12T21:27:25.241689",
            "operationAmount": {
                "amount": "67314.70",
                "currency": {
                    "name": "руб.",
                    "code": "RUB"
                }
            },
            "description": "Перевод организации",
            "from": "Visa Platinum 1246377376343588",
            "to": "Счет 14211924144426031657"
        }
    ]
)

# вызов функции"
descriptions = transaction_descriptions(transactions)
for i in range(5):
    print(next(descriptions))

# на выходе получаем
Перевод организации
Перевод со счета на счет
Перевод со счета на счет
Перевод с карты на карту
Перевод организации
```

+ Тесты для проверки, что функция корректно выдаёт описание каждой транзакции.


Функция ***card_number_generator*** выдает номера банковских карт в формате ***XXXX XXXX XXXX XXXX***, 
где ***X*** — цифра номера карты. Генератор может сгенерировать номера карт в заданном диапазоне 
от 0000 0000 0000 0001 до 9999 9999 9999 9999:

```
# вызов функции"
for card_number in card_number_generator(1, 5):
    print(card_number)

# на выходе получаем
0000 0000 0000 0001
0000 0000 0000 0002
0000 0000 0000 0003
0000 0000 0000 0004
0000 0000 0000 0005
```

+ Тестирование правильности генерации номеров банковских карт.
+ Проверка работы функции при значениях, выходящих за граничные.
+ Параметризация тестов для различных возможных значений.